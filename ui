local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local Player = Players.LocalPlayer
local CoreGui = (RunService:IsStudio() and Player:WaitForChild("PlayerGui")) or game:GetService("CoreGui")

local Library = {}

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "NotificationLibrary"
ScreenGui.Parent = CoreGui

local Container = Instance.new("Frame")
Container.Name = "Container"
Container.AnchorPoint = Vector2.new(1,0)
Container.Position = UDim2.new(1, -20, 0, 20)
Container.Size = UDim2.new(0, 320, 1, -40)
Container.BackgroundTransparency = 1
Container.Parent = ScreenGui

local UIListLayout = Instance.new("UIListLayout", Container)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Padding = UDim.new(0, 8)

local Config = {
    Success = {Color = Color3.fromRGB(46, 204, 113), Icon = "rbxassetid://12900311398"},
    Warning = {Color = Color3.fromRGB(241, 196, 15), Icon = "rbxassetid://85147473315465"},
    Error   = {Color = Color3.fromRGB(231, 76, 60), Icon = "rbxassetid://11537790652"},
    Info    = {Color = Color3.fromRGB(255, 255, 255), Icon = "rbxassetid://92726475245140"}
}

function Library:SendNotification(Type, Message, Duration)
    Type = Type or "Info"
    Message = Message or "No message"
    Duration = Duration or 3
    local Data = Config[Type] or Config.Info

    local Frame = Instance.new("Frame")
    Frame.Size = UDim2.new(1, 0, 0, 50)
    Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    Frame.BorderSizePixel = 0
    Frame.BackgroundTransparency = 0
    Frame.Parent = Container

    local UICorner = Instance.new("UICorner", Frame)
    UICorner.CornerRadius = UDim.new(0, 6)

    local Icon = Instance.new("ImageLabel")
    Icon.Size = UDim2.new(0, 24, 0, 24)
    Icon.Position = UDim2.new(0, 10, 0.5, -12)
    Icon.BackgroundTransparency = 1
    Icon.Image = Data.Icon
    Icon.Parent = Frame

    local TextLabel = Instance.new("TextLabel")
    TextLabel.Size = UDim2.new(1, -50, 1, -10)
    TextLabel.Position = UDim2.new(0, 44, 0, 0)
    TextLabel.Text = Message
    TextLabel.Font = Enum.Font.GothamBold
    TextLabel.TextSize = 16
    TextLabel.TextColor3 = Data.Color
    TextLabel.BackgroundTransparency = 1
    TextLabel.TextXAlignment = Enum.TextXAlignment.Left
    TextLabel.Parent = Frame

    local ProgressBar = Instance.new("Frame")
    ProgressBar.Size = UDim2.new(1, 0, 0, 3)
    ProgressBar.Position = UDim2.new(0, 0, 1, -3)
    ProgressBar.BackgroundColor3 = Data.Color
    ProgressBar.BorderSizePixel = 0
    ProgressBar.Parent = Frame

    TweenService:Create(ProgressBar, TweenInfo.new(Duration, Enum.EasingStyle.Linear), {
        Size = UDim2.new(0, 0, 0, 3)
    }):Play()

    task.delay(Duration, function()
        TweenService:Create(Frame, TweenInfo.new(0.3, Enum.EasingStyle.Sine, Enum.EasingDirection.In), {
            BackgroundTransparency = 1,
            Position = Frame.Position - UDim2.fromOffset(0, 20)
        }):Play()
        task.wait(0.3)
        Frame:Destroy()
    end)
end

return Library
